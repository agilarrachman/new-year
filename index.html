<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026 - Fireworks Celebration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #000428, #004e92);
            color: white;
            min-height: 100vh;            
            position: relative;
            overflow-x: hidden;
        }
        
        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .header {
            margin-top: 40px;
            margin-bottom: 30px;
            text-align: center;
            animation: fadeIn 2s ease-out;
        }
        
        h1 {
            font-size: 4.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            background: linear-gradient(to right, #ffd700, #ff8c00, #ff0080);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 3px;
        }
        
        h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .year {
            font-size: 6rem;
            font-weight: bold;
            color: #ff0080;
            text-shadow: 0 0 20px rgba(255, 0, 128, 0.8);
            margin: 10px 0 30px;
            animation: pulse 2s infinite;
        }
        
        .countdown {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            width: 100%;
            max-width: 800px;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(5px);
            animation: fadeIn 3s ease-out;
        }
        
        .countdown-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #ffd700;
        }
        
        .countdown-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        
        .countdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 10px;
        }
        
        .countdown-value {
            font-size: 3.5rem;
            font-weight: bold;
            color: #ffffff;
            background: rgba(255, 0, 128, 0.2);
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.5);
            margin-bottom: 10px;
        }
        
        .countdown-label {
            font-size: 1.2rem;
            color: #ffd700;
        }
        
        .controls {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .launch-btn {
            background: linear-gradient(to right, #ff0080, #ff8c00);
            color: white;
        }
        
        .sound-btn {
            background: linear-gradient(to right, #004e92, #000428);
            color: white;
        }
        
        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .instructions {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            max-width: 800px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .footer {
            margin-top: 40px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        /* Fireworks Canvas */
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* Fullscreen fireworks page */
        .fullscreen-fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .fullscreen-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001;
        }
        
        .fireworks-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            z-index: 1002;
            text-align: center;
            opacity: 0;
            animation: messageAppear 3s ease-out forwards;
            pointer-events: none;
        }
        
        /* Ucapan khusus untuk Eciee di fullscreen */
        .eciee-messages {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1004;
            text-align: center;
            width: 90%;
            max-width: 1000px;
            pointer-events: none;
            height: 200px;
        }
        
        .message-line {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.5s ease;
            color: #ffd700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
            width: 100%;
            pointer-events: none;
        }
        
        .message-line.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-50%);
        }
        
        .message-line.hidden {
            opacity: 0;
            transform: translateX(-50%) translateY(30px);
        }
        
        .message-line.highlight {
            color: #ff0080;
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(255, 0, 128, 0.6);
        }
        
        .back-button {
            position: absolute;
            bottom: 30px;
            right: 30px;
            padding: 12px 24px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: 2px solid #ffd700;
            border-radius: 50px;
            cursor: pointer;
            z-index: 1003;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .back-button:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateY(-3px);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes glow {
            0% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.8); }
            50% { text-shadow: 0 0 25px rgba(255, 215, 0, 1), 0 0 35px rgba(255, 215, 0, 0.8); }
            100% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.8); }
        }
        
        @keyframes messageAppear {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.5);
            }
            20% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.1);
            }
            30% { 
                transform: translate(-50%, -50%) scale(1);
            }
            80% { 
                opacity: 1; 
            }
            100% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(1.2);
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 3rem; }
            h2 { font-size: 1.8rem; }
            .year { font-size: 4rem; }
            .message-line { font-size: 1.8rem; }
            .message-line.highlight { font-size: 2.2rem; }
            .countdown-value { 
                width: 80px; 
                height: 80px; 
                font-size: 2.5rem;
            }
            .controls { flex-direction: column; align-items: center; }
            button { width: 250px; justify-content: center; }
            .fireworks-message { font-size: 3.5rem; }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 2.2rem; }
            .year { font-size: 3rem; }
            .message-line { font-size: 1.5rem; }
            .message-line.highlight { font-size: 1.8rem; }
            .countdown-value { 
                width: 70px; 
                height: 70px; 
                font-size: 2rem;
            }
            .countdown-label { font-size: 1rem; }
            .fireworks-message { font-size: 2.5rem; }
        }
    </style>
</head>
<body>
    <canvas id="fireworksCanvas"></canvas>
    
    <div class="container">
        <div class="header">
            <h1>Happy New Year!</h1>
            <div class="year">2026</div>
            <h2>Agil & Eciee, mari rayakan awal tahun baru dengan kebahagiaan dan cinta! ‚ù§Ô∏è‚ú®</h2>
        </div>
        
        <div class="countdown">
            <div class="countdown-title">Countdown to 2026</div>
            <div class="countdown-container">
                <div class="countdown-item">
                    <div class="countdown-value" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button class="launch-btn" id="launchFireworks">
                <i class="fas fa-rocket"></i> Launch Fireworks
            </button>
            <button class="sound-btn" id="toggleSound">
                <i class="fas fa-volume-up"></i> Sound: ON
            </button>
        </div>
        
        <div class="instructions">
            <p><i class="fas fa-info-circle"></i> Click "Launch Fullscreen Fireworks" to enter the fullscreen fireworks experience. In fullscreen mode, click anywhere to create custom fireworks explosions. Toggle sound on/off with the sound button. Enjoy the show!</p>
        </div>
        
        <div class="footer">
    <p>Made with <i class="fas fa-heart" style="color: #ff0080;"></i> by your boyfie Agil ArRachman</p>
    <p>To celebrate the arrival of 2026</p>
</div>

    </div>

    <!-- Fullscreen fireworks page -->
    <div class="fullscreen-fireworks" id="fullscreenFireworks">
        <canvas class="fullscreen-canvas" id="fullscreenCanvas"></canvas>
        
        <!-- Pesan Happy New Year asli -->
        <div class="fireworks-message" id="fireworksMessage">Happy New Year 2026!</div>
        
        <!-- Ucapan khusus untuk Eciee (akan muncul setelah pesan utama) -->
        <div class="eciee-messages" id="ecieeMessages">
            <!-- Pesan akan muncul satu per satu di sini -->
        </div>
        
        <button class="back-button" id="backButton">
            <i class="fas fa-arrow-left"></i> Back to Countdown
        </button>
    </div>

    <!-- Audio elements - Orange Free Sounds -->
<audio id="fireworkSound" preload="auto">
    <source src="https://orangefreesounds.com/wp-content/uploads/2023/05/Fireworks-sounds.mp3" type="audio/mpeg">
</audio>

<audio id="launchSound" preload="auto">
    <source src="https://orangefreesounds.com/wp-content/uploads/2023/06/Sound-of-fireworks.mp3" type="audio/mpeg">
</audio>

<audio id="whistleSound" preload="auto">
    <source src="https://orangefreesounds.com/wp-content/uploads/2020/01/Fireworks-rocket-whistle-with-explosion-and-sparkle.mp3" type="audio/mpeg">
</audio>

<audio id="backgroundMusic" preload="auto" loop>
    <source src="https://orangefreesounds.com/wp-content/uploads/2023/06/Ambient-music-free.mp3" type="audio/mpeg">
</audio>

<audio id="newYearSound" preload="auto">
    <source src="https://orangefreesounds.com/wp-content/uploads/2020/06/Crowd-cheer.mp3" type="audio/mpeg">
</audio>

<audio id="crackleSound" preload="auto">
    <source src="https://orangefreesounds.com/wp-content/uploads/2020/12/Crackle-sparkle.mp3" type="audio/mpeg">
</audio>

<audio id="internalBGM" preload="auto" loop>
    <source src="Glenn Fredly - Kasih Putih (Official Audio).mp3" type="audio/mpeg">
</audio>


    <script>
        // ============================================
        // UCAPAN UNTUK ECIEE (DI FULLSCREEN FIREWORKS)
        // ============================================
        const ecieeMessages = [
            "Happy New Year 2026! üéâ",
            "Tahun baru, harapan baru, semoga kebahagiaan kita makin bertambah.",
            "Makasih udah selalu ada di hidup aku.",
            "Kamu bener-bener buat hidup aku lebih berwarna.",
            "Setiap momen bareng kamu selalu berkesan.",
            "Dan kamu bikin tahun 2025 jadi sangat berarti.",
            "Aku yakin 2026 bakal lebih seru dan indah bareng kamu.",
            "Makasih untuk semua tawa, senyum, dan kebahagiaan yang kamu bagi.",
            "Makasih juga untuk semua dukungan dan kasih sayangmu.",
            "You're the most beautiful plot twist for me this year üòò",
            "Selamat Tahun Baru, Eciee! ü•≥",
            "Semoga hubungan kita selalu penuh cinta, bahagia, dan longlasting di 2026 dan seterusnya! ‚ù§Ô∏è",
            "Kita pelan-pelan bangun hubungan ini yaaa, perjalanan kita masih panjang, dan apapun badainya, kita harus bisa lewati susah senangnya bareng-bareng yaa sayang üíï"
        ];

        let currentMessageIndex = 0;
        let messageInterval;
        const ecieeMessagesContainer = document.getElementById('ecieeMessages');
        let currentMessageElement = null;
        const internalBGM = document.getElementById('internalBGM');

        // Start internal BGM saat fullscreen fireworks
function playInternalBGM() {
    internalBGM.volume = 1.0; // atur sesuai selera
    internalBGM.play().catch(e => console.log("Audio play prevented:", e));
}

function stopInternalBGM() {
    internalBGM.pause();
    internalBGM.currentTime = 0;
}

        function showEcieeMessages() {
            // Clear container
            ecieeMessagesContainer.innerHTML = '';
            currentMessageIndex = 0;
            currentMessageElement = null;
            
            // Start showing messages one by one after a delay
            setTimeout(() => {
                messageInterval = setInterval(showNextEcieeMessage, 7000); // 2.5 detik per pesan
                showNextEcieeMessage(); // Tampilkan pesan pertama
            }, 4000); // Delay setelah pesan "Happy New Year 2026!"
        }

        function showNextEcieeMessage() {
            // Sembunyikan pesan sebelumnya jika ada
            if (currentMessageElement) {
                currentMessageElement.classList.remove('visible');
                currentMessageElement.classList.add('hidden');
                
                // Hapus elemen setelah animasi selesai
                setTimeout(() => {
                    if (currentMessageElement && currentMessageElement.parentNode) {
                        currentMessageElement.parentNode.removeChild(currentMessageElement);
                    }
                }, 20000);
            }
            
            if (currentMessageIndex < ecieeMessages.length) {
                // Buat elemen pesan baru
                currentMessageElement = document.createElement('div');
                currentMessageElement.className = 'message-line';
                currentMessageElement.id = `eciee-message-${currentMessageIndex}`;
                currentMessageElement.textContent = ecieeMessages[currentMessageIndex];
                
                // Highlight special messages
                if (ecieeMessages[currentMessageIndex].includes('Eciee') || 
                    ecieeMessages[currentMessageIndex].includes('‚ù§Ô∏è')) {
                    currentMessageElement.classList.add('highlight');
                }
                
                ecieeMessagesContainer.appendChild(currentMessageElement);
                
                // Tampilkan dengan delay kecil untuk animasi
                setTimeout(() => {
                    currentMessageElement.classList.add('visible');
                    
                    // Trigger special fireworks for certain messages
                    if (ecieeMessages[currentMessageIndex].includes('Eciee') || 
                        ecieeMessages[currentMessageIndex].includes('‚ù§Ô∏è')) {
                        createSpecialEcieeFireworks();
                    }
                }, 100);
                
                currentMessageIndex++;
            } else {
                clearInterval(messageInterval);
                // Setelah semua pesan selesai, mulai lagi dari awal setelah jeda
                setTimeout(() => {
                    resetAndShowEcieeMessages();
                }, 3000);
            }
        }

        function resetAndShowEcieeMessages() {
            // Sembunyikan pesan terakhir
            if (currentMessageElement) {
                currentMessageElement.classList.remove('visible');
                currentMessageElement.classList.add('hidden');
                
                // Hapus elemen setelah animasi selesai
                setTimeout(() => {
                    if (currentMessageElement && currentMessageElement.parentNode) {
                        currentMessageElement.parentNode.removeChild(currentMessageElement);
                    }
                    
                    // Reset index
                    currentMessageIndex = 0;
                    currentMessageElement = null;
                    
                    // Start showing messages again
                    messageInterval = setInterval(showNextEcieeMessage, 7000);
                    showNextEcieeMessage();
                }, 20000);
            } else {
                // Reset index
                currentMessageIndex = 0;
                currentMessageElement = null;
                
                // Start showing messages again
                messageInterval = setInterval(showNextEcieeMessage, 7000);
                showNextEcieeMessage();
            }
        }

        function createSpecialEcieeFireworks() {
            // Create special heart-shaped fireworks for Eciee
            const heartCount = 5;
            for (let i = 0; i < heartCount; i++) {
                setTimeout(() => {
                    const startX = Math.random() * fullscreenCanvas.width;
                    const startY = fullscreenCanvas.height;
                    const targetX = fullscreenCanvas.width * 0.3 + Math.random() * (fullscreenCanvas.width * 0.4);
                    const targetY = fullscreenCanvas.height * 0.4 + Math.random() * (fullscreenCanvas.height * 0.2);
                    
                    // Create firework with heart explosion
                    const firework = new Firework(startX, startY, targetX, targetY, true);
                    firework.explosionType = 3; // Heart shape explosion
                    fullscreenFireworksArray.push(firework);
                    
                    // Play special sound
                    if (soundEnabled && Math.random() > 0.5) {
                        launchSound.currentTime = 0;
                        launchSound.volume = 0.2;
                        launchSound.play().catch(e => console.log("Audio play prevented:", e));
                    }
                }, i * 300);
            }
        }

        // ============================================
        // KODE ASLI (dengan modifikasi)
        // ============================================
        
        // Canvas setup
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Fullscreen canvas setup
        const fullscreenCanvas = document.getElementById('fullscreenCanvas');
        const fullscreenCtx = fullscreenCanvas.getContext('2d');
        fullscreenCanvas.width = window.innerWidth;
        fullscreenCanvas.height = window.innerHeight;
        
        // Audio elements
        const fireworkSound = document.getElementById('fireworkSound');
        const launchSound = document.getElementById('launchSound');
        const whistleSound = document.getElementById('whistleSound');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const newYearSound = document.getElementById('newYearSound');
        const crackleSound = document.getElementById('crackleSound');
        
        // DOM elements
        const fullscreenFireworks = document.getElementById('fullscreenFireworks');
        const fireworksMessage = document.getElementById('fireworksMessage');
        const backButton = document.getElementById('backButton');
        
        // Control variables
        let soundEnabled = true;
        let particles = [];
        let fullscreenParticles = [];
        let fireworks = [];
        let fullscreenFireworksArray = [];
        let animationId;
        let fullscreenAnimationId;
        let lastLaunchTime = 0;
        let fullscreenLastLaunchTime = 0;
        const launchInterval = 500; // ms between auto launches
        
        // Update canvas size on window resize
        window.addEventListener('resize', function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            fullscreenCanvas.width = window.innerWidth;
            fullscreenCanvas.height = window.innerHeight;
        });
        
        // Sound toggle
        const toggleSoundBtn = document.getElementById('toggleSound');
        toggleSoundBtn.addEventListener('click', function() {
            soundEnabled = !soundEnabled;
            const icon = this.querySelector('i');
            const text = this.querySelector('span') || document.createElement('span');
            
            if (soundEnabled) {
                icon.className = 'fas fa-volume-up';
                text.textContent = 'Sound: ON';
                backgroundMusic.volume = 0.1;
                backgroundMusic.play().catch(e => console.log("Autoplay prevented:", e));
            } else {
                icon.className = 'fas fa-volume-mute';
                text.textContent = 'Sound: OFF';
                backgroundMusic.pause();
            }
            
            if (!this.querySelector('span')) {
                this.appendChild(text);
            }
        });
        
        // Launch fullscreen fireworks button
        const launchBtn = document.getElementById('launchFireworks');
        launchBtn.addEventListener('click', function() {
            enterFullscreenFireworks();
            if (soundEnabled) {
                launchSound.currentTime = 0;
                launchSound.volume = 0.2;
                launchSound.play().catch(e => console.log("Audio play prevented:", e));
            }
        });
        
        // Back button from fullscreen
        backButton.addEventListener('click', function() {
            exitFullscreenFireworks();
        });
        
        // Launch fireworks on click (main screen)
        canvas.addEventListener('click', function(event) {
            const x = event.clientX;
            const y = Math.min(event.clientY, canvas.height * 0.7);
            
            // Launch multiple fireworks from bottom to target
            const fireworkCount = 3 + Math.floor(Math.random() * 4);
            for (let i = 0; i < fireworkCount; i++) {
                setTimeout(() => {
                    const startX = Math.random() * canvas.width;
                    const startY = canvas.height;
                    const offsetX = (Math.random() - 0.5) * 80;
                    createFirework(startX, startY, x + offsetX, y);
                }, i * 100);
            }
            
            if (soundEnabled) {
                launchSound.currentTime = 0;
                launchSound.volume = 0.2;
                launchSound.play().catch(e => console.log("Audio play prevented:", e));
            }
        });
        
        // Launch multiple fireworks on click (fullscreen)
        fullscreenCanvas.addEventListener('click', function(event) {
            const x = event.clientX;
            const y = Math.min(event.clientY, fullscreenCanvas.height * 0.7);
            
            const fireworkCount = 5 + Math.floor(Math.random() * 6);
            for (let i = 0; i < fireworkCount; i++) {
                setTimeout(() => {
                    const startX = Math.random() * fullscreenCanvas.width;
                    const startY = fullscreenCanvas.height;
                    const offsetX = (Math.random() - 0.5) * 150;
                    createFullscreenFirework(startX, startY, x + offsetX, y);
                }, i * 80);
            }
            
            if (soundEnabled) {
                launchSound.currentTime = 0;
                launchSound.volume = 0.2;
                launchSound.play().catch(e => console.log("Audio play prevented:", e));
            }
        });
        
        // Start background music (with user interaction requirement)
        document.addEventListener('click', function initAudio() {
            if (soundEnabled) {
                backgroundMusic.volume = 0.2;
                backgroundMusic.play().catch(e => console.log("Autoplay prevented:", e));
            }
            document.removeEventListener('click', initAudio);
        });
        
        // Countdown to 2026
        function updateCountdown() {
            const now = new Date();
            const newYear = new Date(now.getFullYear() + 1, 0, 1); // January 1st of next year
            
            // If we're already in 2026, set to 2027
            if (now.getFullYear() >= 2026) {
                newYear.setFullYear(2027);
            }
            
            const diff = newYear - now;
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }
        
        // Update countdown every second
        setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call
        
        // Di enterFullscreenFireworks, panggil playInternalBGM
function enterFullscreenFireworks() {
    fullscreenFireworks.style.display = 'block';
    document.querySelector('.container').style.opacity = '0';
    startFullscreenFireworks();
    
    // Play internal BGM
    playInternalBGM();

    setTimeout(() => {
        fireworksMessage.style.display = 'block';
        if (soundEnabled) {
            newYearSound.currentTime = 0;
            newYearSound.volume = 0.3;
            newYearSound.play().catch(e => console.log("Audio play prevented:", e));
        }
    }, 1000);

    setTimeout(() => {
        fireworksMessage.style.display = 'none';
        showEcieeMessages();
    }, 4000);
}

// Saat keluar fullscreen, hentikan BGM
function exitFullscreenFireworks() {
    fullscreenFireworks.style.display = 'none';
    document.querySelector('.container').style.opacity = '1';
    cancelAnimationFrame(fullscreenAnimationId);
    fullscreenParticles = [];
    fullscreenFireworksArray = [];
    clearInterval(messageInterval);
    ecieeMessagesContainer.innerHTML = '';
    currentMessageIndex = 0;
    currentMessageElement = null;

    stopInternalBGM();
}
        
        // Firework class
        class Firework {
            constructor(x, y, targetX, targetY, isFullscreen = false) {
                this.x = x;
                this.y = y;
                this.targetX = targetX;
                this.targetY = targetY;
                this.speed = 6 + Math.random() * 4;
                this.velocity = {
                    x: (targetX - x) / (canvas.height / this.speed),
                    y: (targetY - y) / (canvas.height / this.speed)
                };
                this.gravity = 0.02;
                this.color = this.getRandomColor();
                this.trail = [];
                this.exploded = false;
                this.trailLength = 8;
                this.isFullscreen = isFullscreen;
                this.explosionType = Math.floor(Math.random() * 5); // 0-4 different explosion types
                
                if (soundEnabled && Math.random() > 0.5 && !isFullscreen) {
                    setTimeout(() => {
                        whistleSound.currentTime = 0;
                        whistleSound.volume = 0.2;
                        whistleSound.play().catch(e => console.log("Audio play prevented:", e));
                    }, 300);
                }
            }
            
            getRandomColor() {
                const colors = [
                    '#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff',
                    '#ff8000', '#ff0080', '#80ff00', '#0080ff', '#ff80ff', '#80ffff'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            update() {
                // Add to trail
                this.trail.push({x: this.x, y: this.y});
                if (this.trail.length > this.trailLength) {
                    this.trail.shift();
                }
                
                // Apply velocity
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                
                // Apply gravity
                this.velocity.y += this.gravity;
                
                // Check if reached target
                const distance = Math.sqrt(
                    Math.pow(this.targetX - this.x, 2) + Math.pow(this.targetY - this.y, 2)
                );
                
                if (distance < 15 && !this.exploded) {
                    this.explode();
                }
                
                // Draw
                this.draw();
            }
            
            draw() {
                const currentCtx = this.isFullscreen ? fullscreenCtx : ctx;
                
                // Draw trail
                for (let i = 0; i < this.trail.length; i++) {
                    const point = this.trail[i];
                    const alpha = i / this.trail.length * 0.7;
                    
                    currentCtx.beginPath();
                    currentCtx.arc(point.x, point.y, 2, 0, Math.PI * 2);
                    currentCtx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                    currentCtx.fill();
                }
                
                // Draw firework
                currentCtx.beginPath();
                currentCtx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                currentCtx.fillStyle = this.color;
                currentCtx.fill();
                
                // Add glow
                currentCtx.beginPath();
                currentCtx.arc(this.x, this.y, 8, 0, Math.PI * 2);
                const gradient = currentCtx.createRadialGradient(
                    this.x, this.y, 0,
                    this.x, this.y, 8
                );
                gradient.addColorStop(0, this.color);
                gradient.addColorStop(1, 'transparent');
                currentCtx.fillStyle = gradient;
                currentCtx.fill();
            }
            
            explode() {
                this.exploded = true;
                
                // Play explosion sound
                if (soundEnabled) {
                    setTimeout(() => {
                        fireworkSound.currentTime = 0;
                        fireworkSound.volume = 0.1;
                        fireworkSound.play().catch(e => console.log("Audio play prevented:", e));
                    }, 100);
                }
                
                // Create particles based on explosion type
                const particleCount = 60 + Math.floor(Math.random() * 90);
                
                for (let i = 0; i < particleCount; i++) {
                    let speed, angle, velocity;
                    
                    switch(this.explosionType) {
                        case 0: // Standard circular explosion
                            speed = 2 + Math.random() * 5;
                            angle = Math.random() * Math.PI * 2;
                            velocity = {
                                x: Math.cos(angle) * speed,
                                y: Math.sin(angle) * speed
                            };
                            break;
                            
                        case 1: // Ring explosion
                            speed = 3 + Math.random() * 4;
                            angle = (i / particleCount) * Math.PI * 2;
                            velocity = {
                                x: Math.cos(angle) * speed,
                                y: Math.sin(angle) * speed
                            };
                            break;
                            
                        case 2: // Double ring explosion
                            if (i < particleCount/2) {
                                speed = 2 + Math.random() * 3;
                                angle = (i / (particleCount/2)) * Math.PI * 2;
                            } else {
                                speed = 4 + Math.random() * 3;
                                angle = ((i - particleCount/2) / (particleCount/2)) * Math.PI * 2;
                            }
                            velocity = {
                                x: Math.cos(angle) * speed,
                                y: Math.sin(angle) * speed
                            };
                            break;
                            
                        case 3: // Heart shape explosion
                            angle = (i / particleCount) * Math.PI * 2;
                            const t = angle;
                            const heartX = 16 * Math.pow(Math.sin(t), 3);
                            const heartY = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                            speed = 0.2 + Math.random() * 0.3;
                            velocity = {
                                x: heartX * speed,
                                y: heartY * speed
                            };
                            break;
                            
                        case 4: // Random cluster explosion
                            speed = 1 + Math.random() * 6;
                            angle = Math.random() * Math.PI * 2;
                            velocity = {
                                x: Math.cos(angle) * speed,
                                y: Math.sin(angle) * speed
                            };
                            break;
                    }
                    
                    if (this.isFullscreen) {
                        fullscreenParticles.push(new Particle(
                            this.x, 
                            this.y, 
                            velocity, 
                            this.color,
                            this.explosionType,
                            true
                        ));
                    } else {
                        particles.push(new Particle(
                            this.x, 
                            this.y, 
                            velocity, 
                            this.color,
                            this.explosionType
                        ));
                    }
                }
                
                // Add crackle sound for some explosions
                if (soundEnabled && Math.random() > 0.7) {
                    setTimeout(() => {
                        crackleSound.currentTime = 0;
                        crackleSound.volume = 0.1;
                        crackleSound.play().catch(e => console.log("Audio play prevented:", e));
                    }, 500);
                }
            }
        }
        
        // Particle class
        class Particle {
            constructor(x, y, velocity, color, explosionType, isFullscreen = false) {
                this.x = x;
                this.y = y;
                this.velocity = velocity;
                this.color = color;
                this.size = 1.5 + Math.random() * 3;
                this.life = 1.0;
                this.decay = 0.01 + Math.random() * 0.03;
                this.gravity = 0.05;
                this.wind = (Math.random() - 0.5) * 0.02;
                this.isFullscreen = isFullscreen;
                this.explosionType = explosionType;
                this.sparkle = Math.random() > 0.7;
            }
            
            update() {
                this.velocity.y += this.gravity;
                this.velocity.x += this.wind;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.life -= this.decay;
                
                // Sparkle effect
                if (this.sparkle && Math.random() > 0.9) {
                    this.size = 3 + Math.random() * 4;
                } else {
                    this.size = Math.max(0.5, this.size * 0.98);
                }
                
                this.draw();
                
                return this.life > 0;
            }
            
            draw() {
                const currentCtx = this.isFullscreen ? fullscreenCtx : ctx;
                
                currentCtx.beginPath();
                
                if (this.explosionType === 1 || this.explosionType === 2) {
                    // Draw star shape for ring explosions
                    currentCtx.moveTo(this.x, this.y - this.size);
                    for (let i = 0; i < 5; i++) {
                        const angle = (i * 2 * Math.PI) / 5;
                        const x1 = this.x + Math.sin(angle) * this.size;
                        const y1 = this.y - Math.cos(angle) * this.size;
                        currentCtx.lineTo(x1, y1);
                        
                        const angle2 = angle + Math.PI / 5;
                        const x2 = this.x + Math.sin(angle2) * (this.size / 2);
                        const y2 = this.y - Math.cos(angle2) * (this.size / 2);
                        currentCtx.lineTo(x2, y2);
                    }
                } else {
                    // Draw circle for other explosions
                    currentCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                }
                
                currentCtx.fillStyle = this.color;
                currentCtx.globalAlpha = this.life;
                currentCtx.fill();
                
                // Add glow for sparkles
                if (this.sparkle) {
                    currentCtx.beginPath();
                    currentCtx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
                    const gradient = currentCtx.createRadialGradient(
                        this.x, this.y, 0,
                        this.x, this.y, this.size * 2
                    );
                    gradient.addColorStop(0, this.color);
                    gradient.addColorStop(1, 'transparent');
                    currentCtx.fillStyle = gradient;
                    currentCtx.fill();
                }
                
                currentCtx.globalAlpha = 1.0;
            }
        }
        
        // Create firework at specific location
        function createFirework(startX, startY, targetX, targetY) {
            fireworks.push(new Firework(startX, startY, targetX, targetY));
        }
        
        // Create fullscreen firework at specific location
        function createFullscreenFirework(startX, startY, targetX, targetY) {
            fullscreenFireworksArray.push(new Firework(startX, startY, targetX, targetY, true));
        }
        
        // Launch a random firework
        function launchRandomFirework() {
            const startX = Math.random() * canvas.width;
            const startY = canvas.height;
            const targetX = Math.random() * canvas.width;
            const targetY = Math.random() * (canvas.height * 0.6);
            
            fireworks.push(new Firework(startX, startY, targetX, targetY));
        }
        
        // Launch a random fullscreen firework
        function launchRandomFullscreenFirework() {
            const startX = Math.random() * fullscreenCanvas.width;
            const startY = fullscreenCanvas.height;
            const targetX = Math.random() * fullscreenCanvas.width;
            const targetY = Math.random() * (fullscreenCanvas.height * 0.6);
            
            fullscreenFireworksArray.push(new Firework(startX, startY, targetX, targetY, true));
        }
        
        // Auto-launch fireworks
        function autoLaunchFireworks() {
            const now = Date.now();
            if (now - lastLaunchTime > launchInterval) {
                launchRandomFirework();
                lastLaunchTime = now;
                
                // Occasionally launch multiple at once
                if (Math.random() > 0.7) {
                    setTimeout(() => launchRandomFirework(), 200);
                    setTimeout(() => launchRandomFirework(), 400);
                }
            }
        }
        
        // Auto-launch fullscreen fireworks
        function autoLaunchFullscreenFireworks() {
            const now = Date.now();
            if (now - fullscreenLastLaunchTime > launchInterval) {
                launchRandomFullscreenFirework();
                fullscreenLastLaunchTime = now;
                
                // Occasionally launch multiple at once
                if (Math.random() > 0.6) {
                    setTimeout(() => launchRandomFullscreenFirework(), 150);
                    setTimeout(() => launchRandomFullscreenFirework(), 300);
                }
            }
        }
        
        // Animation loop for main page
        function animate() {
            // Clear canvas with a fade effect for trails
            ctx.fillStyle = 'rgba(0, 4, 40, 0.08)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Auto launch fireworks
            autoLaunchFireworks();
            
            // Update and draw fireworks
            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].update();
                
                if (fireworks[i].exploded) {
                    fireworks.splice(i, 1);
                }
            }
            
            // Update and draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                if (!particles[i].update()) {
                    particles.splice(i, 1);
                }
            }
            
            // Add some random sparks
            if (Math.random() > 0.8 && particles.length < 800) {
                particles.push(new Particle(
                    Math.random() * canvas.width,
                    Math.random() * canvas.height * 0.8,
                    {x: (Math.random() - 0.5) * 2, y: (Math.random() - 0.5) * 2},
                    `hsl(${Math.random() * 60 + 20}, 100%, 60%)`,
                    0
                ));
            }
            
            animationId = requestAnimationFrame(animate);
        }
        
        // Animation loop for fullscreen page
        function animateFullscreen() {
            // Clear canvas with a fade effect for trails
            fullscreenCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            fullscreenCtx.fillRect(0, 0, fullscreenCanvas.width, fullscreenCanvas.height);
            
            // Auto launch fireworks
            autoLaunchFullscreenFireworks();
            
            // Update and draw fireworks
            for (let i = fullscreenFireworksArray.length - 1; i >= 0; i--) {
                fullscreenFireworksArray[i].update();
                
                if (fullscreenFireworksArray[i].exploded) {
                    fullscreenFireworksArray.splice(i, 1);
                }
            }
            
            // Update and draw particles
            for (let i = fullscreenParticles.length - 1; i >= 0; i--) {
                if (!fullscreenParticles[i].update()) {
                    fullscreenParticles.splice(i, 1);
                }
            }
            
            // Add some random sparks
            if (Math.random() > 0.8 && fullscreenParticles.length < 1200) {
                fullscreenParticles.push(new Particle(
                    Math.random() * fullscreenCanvas.width,
                    Math.random() * fullscreenCanvas.height * 0.8,
                    {x: (Math.random() - 0.5) * 2, y: (Math.random() - 0.5) * 2},
                    `hsl(${Math.random() * 360}, 100%, 60%)`,
                    0,
                    true
                ));
            }
            
            fullscreenAnimationId = requestAnimationFrame(animateFullscreen);
        }
        
        // Start fullscreen fireworks animation
        function startFullscreenFireworks() {
            // Start with a big explosion in the center
            const centerX = fullscreenCanvas.width / 2;
            const centerY = fullscreenCanvas.height / 2;
            
            // Create multiple big explosions
            for (let j = 0; j < 3; j++) {
                setTimeout(() => {
                    for (let i = 0; i < 150; i++) {
                        const speed = 4 + Math.random() * 6;
                        const angle = Math.random() * Math.PI * 2;
                        const velocity = {
                            x: Math.cos(angle) * speed,
                            y: Math.sin(angle) * speed
                        };
                        
                        fullscreenParticles.push(new Particle(
                            centerX + (Math.random() - 0.5) * 100, 
                            centerY + (Math.random() - 0.5) * 100, 
                            velocity, 
                            `hsl(${Math.random() * 360}, 100%, 60%)`,
                            Math.floor(Math.random() * 5),
                            true
                        ));
                    }
                }, j * 500);
            }
            
            // Start multiple fireworks around the screen
            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    const angle = (i / 12) * Math.PI * 2;
                    const radius = 200 + Math.random() * 100;
                    const x = centerX + Math.cos(angle) * radius;
                    const y = centerY * 0.7 + Math.sin(angle) * radius * 0.5;
                    
                    launchRandomFullscreenFirework();
                }, i * 400);
            }
            
            // Start the animation loop
            animateFullscreen();
        }
        
        // Start main animation
        animate();
        
        // Start with a few fireworks
        setTimeout(() => {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => launchRandomFirework(), i * 400);
            }
        }, 1000);
        
        // Instructions with a slight delay
        setTimeout(() => {
            document.querySelector('.instructions').style.animation = 'fadeIn 2s ease-out';
        }, 2000);
    </script>
</body>
</html>